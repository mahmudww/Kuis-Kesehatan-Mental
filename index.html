<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cek Kesejahteraan Mental Diri: Cepat & Akurat</title>
    <style>
        /* CSS untuk Kuis Serius */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7; 
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .quiz-container {
            width: 90%;
            max-width: 650px;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        h1 {
            color: #ff6b6b;
            border-bottom: 2px solid #ff6b6b;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        #step-counter {
            font-size: 1em;
            text-align: right;
            color: #555;
            margin-bottom: 15px;
        }
        #question-text {
            font-size: 1.3em;
            margin-bottom: 25px;
            font-weight: 600;
            text-align: left;
            padding: 10px;
            border-left: 5px solid #4ecdc4;
            /* TRANSISI UNTUK FADE-IN/OUT */
            transition: opacity 0.5s ease-in-out; 
        }
        /* Style untuk Gambar Pertanyaan (Rata Tengah) */
        #question-image {
            width: 100%; 
            max-width: 400px; 
            height: auto; 
            margin: 0 auto 20px auto;
            display: block;
            border-radius: 8px;
            /* TRANSISI UNTUK FADE-IN/OUT */
            transition: opacity 0.5s ease-in-out;
        }

        .choice-btn {
            display: block;
            width: 100%; 
            padding: 15px;
            margin-bottom: 12px;
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            /* Transisi juga diupdate untuk opacity */
            transition: background-color 0.15s, border-color 0.15s, opacity 0.5s ease-in-out;
            text-align: left;
        }

        .choice-btn:hover {
            background-color: #e9ecef;
            border-color: #ff6b6b;
            color: #ff6b6b;
        }

        /* Class untuk Konfirmasi Klik (UX Smartphone) */
        .choice-btn.clicked {
            background-color: #ff6b6b;
            color: white;
            border-color: #ff6b6b;
        }

        /* Container choices perlu property agar height bisa diatur oleh JS */
        #choices-container {
             /* Penting untuk memastikan height dapat diatur saat reflow fix */
            min-height: 10px;
        }
        
        #quiz-screen, #result-screen {
            display: none;
        }
        #result-screen h2 {
            color: #28a745;
            margin-top: 0;
        }
        #score-summary {
            text-align: left;
            margin-top: 20px;
        }
        .score-item {
            padding: 10px;
            margin: 8px 0;
            border-left: 4px solid;
            font-size: 1.1em;
            background-color: #f8f9fa;
        }
        .score-item strong {
            display: inline-block;
            min-width: 150px;
        }

        /* Warna Border untuk Interpretasi */
        .low { border-left-color: #28a745; }
        .moderate { border-left-color: #ffc107; }
        .high { border-left-color: #dc3545; }
        
        .score-footer {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
            text-align: left;
            font-size: 0.95em;
            color: #6c757d;
        }
    </style>
</head>
<body>

<div class="quiz-container">
    <h1>üå± Cek Kesejahteraan Mental Diri: Kamu Butuh Bantuan?</h1>

    <div id="intro-screen">
        <p style="font-size: 1.1em; text-align: left;">Hai! Kuis ini dibuat untuk bantu kamu kenalan lebih dekat sama kondisi mentalmu. Kami akan identifikasi area yang mungkin butuh perhatian.</p>
        <p style="font-size: 1.1em; text-align: left; font-weight: bold; color: #ff6b6b;">üìù Jawab dengan jujur dan cepat. Kuis ini hanya butuh waktu <strong>KURANG DARI 3 MENIT!</strong></p>
        <p style="font-size: 0.9em; margin-top: 20px; text-align: left; color: #6c757d;">Penting: Kuis ini hanya alat bantu <i>self-awareness</i> dan **bukan** pengganti diagnosa profesional.</p>
        <button id="start-button" class="choice-btn" style="text-align: center; background-color: #ff6b6b; color: white; margin-top: 30px;">Mulai Cek Kondisi Mental (3 Menit)</button>
    </div>

    <div id="quiz-screen">
        <p id="step-counter">...</p>
        <img id="question-image" src="" alt="Ilustrasi Pertanyaan"> 
        
        <p id="question-text">Memuat pertanyaan...</p>
        
        <div id="choices-container">
        </div>
    </div>

    <div id="result-screen">
        <h2>‚ú® Hasil Cek Profil Kamu</h2>
        <p>Oke, ini dia ringkasan kebutuhan dukungan kamu berdasarkan 20 jawaban tadi:</p>
        
        <div id="score-summary">
        </div>

        <div class="score-footer">
            <p>Penting: Kalau kamu dapat skor Sedang atau Tinggi di salah satu kategori, itu tandanya kamu butuh waktu istirahat lebih atau mungkin sudah saatnya ngobrol dengan profesional (psikolog/terapis) ya. <i>It's okay to ask for help!</i></p>
        </div>
        <button class="choice-btn" onclick="location.reload()" style="background-color: #4ecdc4; color: white; width: 100%; margin-top: 20px; text-align: center;">Coba Lagi / Mulai Ulang</button>
    </div>

</div>

<script>
    // --- SKALA JAWABAN ---
    const answerScale = [
        { text: "Gak sama sekali (0 hari)", score: 0 },
        { text: "Beberapa hari aja", score: 1 },
        { text: "7 hari atau lebih", score: 2 },
        { text: "Hampir setiap hari", score: 3 }
    ];

    // --- PERTANYAN (SEMUA JALUR MENGGUNANAKAN .jpeg) ---
    const questions = [
        { category: "Depresi", text: "Merasa sedih, <em>down</em>, atau putus asa (bukan ada harapan).", image: "./images/q1.jpeg" }, 
        { category: "Depresi", text: "Bukan semangat atau bukan menikmati hal-hal yang biasanya kamu suka.", image: "./images/q2.jpeg" },
        { category: "Depresi", text: "Merasa capek banget atau bukan punya energi.", image: "./images/q3.jpeg" },
        { category: "Depresi", text: "Mengalami masalah tidur (susah tidur, tidur kebanyakan, atau sering bangun).", image: "./images/q4.jpeg" },
        { category: "Depresi", text: "Merasa kamu itu gagal, mengecewakan diri sendiri atau orang lain.", image: "./images/q5.jpeg" },
        
        { category: "Kecemasan", text: "Merasa gugup, cemas, atau tegang berlebihan tanpa alasan jelas.", image: "./images/q6.jpeg" },
        { category: "Kecemasan", text: "Bukan bisa berhenti atau mengontrol pikiran yang bikin khawatir (<em>overthinking</em>).", image: "./images/q7.jpeg" },
        { category: "Kecemasan", text: "Terlalu khawatir tentang banyak hal (sekolah, kerjaan, uang, dll.).", image: "./images/q8.jpeg" },
        { category: "Kecemasan", text: "Sulit banget buat santai atau merasa bukan tenang.", image: "./images/q9.jpeg" },
        { category: "Kecemasan", text: "Gampang banget marah atau terganggu (sensitif).", image: "./images/q10.jpeg" },

        { category: "Stres", text: "Merasa tertekan sama hal-hal yang terjadi mendadak atau di luar rencana?", image: "./images/q11.jpeg" },
        { category: "Stres", text: "Merasa kamu bukan sanggup nanganin semua tugas/tanggung jawab kamu?", image: "./images/q12.jpeg" },
        { category: "Stres", text: "Merasa marah atau kesal karena ada hal-hal yang bukan bisa kamu kontrol?", image: "./images/q13.jpeg" },
        { category: "Stres", text: "Merasa <strong>KESULITAN</strong> banget ngontrol gimana kamu pakai waktu kamu?", image: "./images/q14.jpeg" }, 
        { category: "Stres", text: "Merasa susah banget buat ngendalikan hal-hal yang bikin kamu iritasi di hidup kamu?", image: "./images/q15.jpeg" },

        { category: "Kelelahan", text: "Merasa terkuras fisik dan emosional di akhir hari/aktivitas (habis energi)?", image: "./images/q16.jpeg" },
        { category: "Kelelahan", text: "Merasa sinis atau bukan peduli sama kerjaan/aktivitas harian kamu?", image: "./images/q17.jpeg" },
        { category: "Kelelahan", text: "Merasa kemampuan atau efektivitas kamu menurun drastis?", image: "./images/q18.jpeg" },
        { category: "Kelelahan", text: "Cenderung ngejauhin diri dari teman/rekan kerja dan cuma mau sendirian?", image: "./images/q19.jpeg" },
        { category: "Kelelahan", text: "Merasa usaha kamu bukan dihargai atau bukan ada artinya?", image: "./images/q20.jpeg" }
    ];

    // --- INTERPRETASI SKOR ---
    const interpretation = {
        Depresi: [
            { threshold: 10, label: "Tinggi", class: "high", recommendation: "Ada kemungkinan gejala Depresi cukup kuat. Jangan tunda, segera cari bantuan profesional untuk evaluasi lebih lanjut." },
            { threshold: 5, label: "Sedang", class: "moderate", recommendation: "Gejala suasana hati cukup terasa. Prioritaskan <i>self-care</i> dan cari tahu apa yang memicu perasaan ini. Ngobrol sama teman supportif bisa bantu." },
            { threshold: 0, label: "Rendah", class: "low", recommendation: "Mood kamu aman terkendali. Lanjutkan kebiasaan baikmu!" }
        ],
        Kecemasan: [
            { threshold: 10, label: "Tinggi", class: "high", recommendation: "Tingkat Kecemasanmu tinggi dan mengganggu aktivitas. Penting banget untuk belajar teknik relaksasi dan pertimbangkan untuk konsultasi." },
            { threshold: 5, label: "Sedang", class: "moderate", recommendation: "Kekhawatiranmu cukup menguras energi. Coba batasi sumber stres (sosial media, berita) dan fokus pada <i>mindfulness</i>." },
            { threshold: 0, label: "Rendah", class: "low", recommendation: "Kamu termasuk orang yang tenang dan bukan gampang panik. Nice!" }
        ],
        Stres: [
            { threshold: 10, label: "Tinggi", class: "high", recommendation: "Stresmu sudah di level bahaya! Kamu perlu evaluasi ulang batas (<i>boundary</i>) dan beban kerja/hidupmu. Istirahat jadi prioritas utama." },
            { threshold: 5, label: "Sedang", class: "moderate", recommendation: "Tekanan hidup terasa, tapi masih bisa diatasi. Coba atur jadwal, delegasikan tugas, dan jangan lupa me time." },
            { threshold: 0, label: "Rendah", class: "low", recommendation: "Stres terkendali! Kamu pintar mengatur hidup dan prioritas." }
        ],
         Kelelahan: [
            { threshold: 10, label: "Tinggi", class: "high", recommendation: "Ini bisa jadi tanda Burnout serius. Istirahat total, ambil cuti, dan bicarakan ini dengan atasan/orang terdekat. Jangan paksakan diri." },
            { threshold: 5, label: "Sedang", class: "moderate", recommendation: "Ada kelelahan emosional yang menumpuk. Coba ganti rutinitas, temukan kembali tujuanmu, dan tetapkan batasan waktu kerja yang lebih jelas." },
            { threshold: 0, label: "Rendah", class: "low", recommendation: "Motivasi dan energimu bagus! Pertahankan keseimbangan hidupmu." }
        ]
    };

    let currentStep = 0;
    let scores = { Depresi: 0, Kecemasan: 0, Stres: 0, Kelelahan: 0 };
    
    // Elemen DOM
    const introScreen = document.getElementById('intro-screen');
    const startButton = document.getElementById('start-button');
    const quizScreen = document.getElementById('quiz-screen');
    const questionTextElement = document.getElementById('question-text');
    const questionImageElement = document.getElementById('question-image'); 
    const choicesContainer = document.getElementById('choices-container');
    const stepCounterElement = document.getElementById('step-counter');
    const resultScreen = document.getElementById('result-screen');
    const scoreSummaryElement = document.getElementById('score-summary');

    // --- FUNGSI UTAMA ---

    function startQuiz() {
        introScreen.style.display = 'none';
        quizScreen.style.display = 'block';
        loadStep();
    }

    // Fungsi untuk menampilkan konten (teks dan tombol) setelah gambar siap
    function displayQuestionContent(step) {
        
        const fullQuestionText = `Dalam <strong>dua minggu terakhir</strong>, seberapa sering kamu terganggu oleh hal ini: <strong>${step.text}</strong>`;
        questionTextElement.innerHTML = fullQuestionText;
        
        choicesContainer.innerHTML = ''; 
        
        // 1. Pastikan opacity disetel ke 0 sebelum konten baru dimasukkan (untuk memicu fade-in)
        questionTextElement.style.opacity = '0';
        questionImageElement.style.opacity = '0';

        answerScale.forEach((answer) => {
            const button = document.createElement('button');
            button.className = 'choice-btn';
            button.textContent = answer.text;
            
            button.onclick = () => chooseChoice(answer.score, step.category, button); 
            
            choicesContainer.appendChild(button);
        });

        // 2. KUNCI PERBAIKAN: Gunakan setTimeout 50ms untuk memaksa transisi fade-in
        setTimeout(() => {
            questionTextElement.style.opacity = '1'; 
            
            if (questionImageElement.style.display !== 'none') {
                questionImageElement.style.opacity = '1';
            }
        }, 50); // Jeda sangat singkat (50ms) untuk memicu transisi CSS
    }

    function loadStep() {
        if (currentStep >= questions.length) {
            showFinalResult();
            return;
        }
        
        const step = questions[currentStep];
        
        stepCounterElement.textContent = `Pertanyaan ${currentStep + 1} dari ${questions.length}`;
        
        // KOSONGKAN PILIHAN JAWABAN SEMENTARA
        choicesContainer.innerHTML = ''; 
        
        // 1. TANGANI GAMBAR
        if (step.image) {
            questionImageElement.src = step.image;
            questionImageElement.style.display = 'block';
            
            // TUNGGU GAMBAR SELESAI DI-LOAD
            questionImageElement.onload = () => {
                displayQuestionContent(step);
            };
            // Penanganan jika gambar gagal di-load
            questionImageElement.onerror = () => {
                console.error("Gagal memuat gambar:", step.image);
                displayQuestionContent(step); 
            };
        } else {
            questionImageElement.style.display = 'none';
            // Jika tidak ada gambar, langsung tampilkan konten
            displayQuestionContent(step);
        }
    }

    // Fungsi sekarang menerima elemen tombol (buttonElement) untuk efek klik
    function chooseChoice(score, category, buttonElement) {
        // 1. Terapkan kelas 'clicked' ke tombol yang baru diklik (perubahan warna)
        buttonElement.classList.add('clicked');
        
        // Simpan skor sebelum jeda
        scores[category] += score;

        // KUNCI PERBAIKAN JUMP/REFLOW: Tangkap dan set tinggi container pilihan
        const currentHeight = choicesContainer.offsetHeight;
        choicesContainer.style.height = `${currentHeight}px`;
        
        // 2. Beri jeda 400 milidetik (0.4 detik) untuk konfirmasi klik
        setTimeout(() => {
            
            // Hapus kelas 'clicked' dari semua tombol
            document.querySelectorAll('.choice-btn').forEach(btn => {
                btn.classList.remove('clicked');
            });

            // KUNCI PERBAIKAN JUMP/REFLOW: Hapus tinggi agar container bisa menampung konten baru
            choicesContainer.style.height = ''; 
            
            // 3. Lanjutkan ke langkah berikutnya
            currentStep++; 
            loadStep();
        }, 400); // Jeda 400 milidetik (0.4 detik)
    }
    
    function getInterpretation(category, totalScore) {
        const rules = interpretation[category];
        for (const rule of rules) {
            if (totalScore >= rule.threshold) {
                return rule;
            }
        }
    }

    function showFinalResult() {
        quizScreen.style.display = 'none';
        resultScreen.style.display = 'block';
        
        questionImageElement.style.display = 'none'; 
        
        scoreSummaryElement.innerHTML = '';

        for (const category in scores) {
            const totalScore = scores[category];
            const interpretationData = getInterpretation(category, totalScore);

            const scoreItem = document.createElement('div');
            scoreItem.className = `score-item ${interpretationData.class}`;
            scoreItem.innerHTML = `
                <strong>${category} Score:</strong> <span style="font-weight: bold;">${totalScore}</span> / 15
                <br>
                <span style="font-size: 1em;">
                    Tingkat Kebutuhan Dukungan: <span style="font-weight: bold; color: ${interpretationData.class === 'high' ? '#dc3545' : interpretationData.class === 'moderate' ? '#ffc107' : '#28a745'}">${interpretationData.label}</span>
                </span>
                <p style="font-size: 0.9em; margin-top: 5px; color: #555;">Rekomendasi: ${interpretationData.recommendation}</p>
            `;
            scoreSummaryElement.appendChild(scoreItem);
        }
        
        console.log("Skor Akhir:", scores);
    }

    // MULAI: Panggil startQuiz saat tombol diklik
    startButton.onclick = startQuiz;

</script>

</body>
</html>
